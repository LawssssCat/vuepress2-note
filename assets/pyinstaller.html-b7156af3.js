import{_ as l,r as p,o,c,a as n,b as s,d as a,w as d,e}from"./app-04e6f892.js";const u={},r={class:"custom-container danger"},k=e('<p class="custom-container-title">è­¦å‘Š</p><p>ç»è¿‡å„ç§è¸©å‘ï¼Œå¾—å‡ºä»¥ä¸‹æ€»ç»“ï¼š</p><p>ä½¿ç”¨ pyinstaller æŠŠ python æ‰“åŒ…æˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶å±äºè„±è£¤å­æ”¾å±ã€‚</p><p><strong>ç†ç”±</strong>ï¼š</p><ol><li>è·¨å¹³å°å…¼å®¹æ€§å·®ï¼š ç”±äºè¯­è¨€çš„ç‰¹æ€§ pyinstaller æ‰“åŒ…å‡ºæ¥çš„äºŒè¿›åˆ¶ä¾èµ–ç³»ç»Ÿçš„åŠ¨æ€åº“ã€‚è¿™å¯¼è‡´ç¨‹åºå¯èƒ½å¯ä»¥è·¨å¹³å°è·‘ï¼Œå•å¤§æ¦‚ç‡ä¸èƒ½è·‘ã€‚è¦ä¹ˆåŠ¨æ€åº“ç¼ºå¤±ï¼Œè¦ä¹ˆGLIBCç‰ˆæœ¬è¦æ±‚å¤ªé«˜ï¼Œç³»ç»Ÿæ²¡æœ‰ç›¸å…³å‡½æ•°é›†ã€‚</li><li>ç ´åé¡¹ç›®ç»“æ„ï¼š æ‰“åŒ…åçš„ç¨‹åºä¾èµ–çš„æ–‡ä»¶è·¯å¾„ä¼šæ”¹å˜ï¼Œè¦ä¹ˆåœ¨ <code>_internal</code> ä¸­ï¼Œè¦ä¹ˆåœ¨è§£å‹çš„ <code>/tmp</code> ä¸´æ—¶ç›®å½•ä¸­ã€‚å¤„ç†è¿™ç§è·¯å¾„çš„å˜åŒ–éœ€è¦æ·»åŠ é¢å¤–çš„ä»£ç ã€‚å¦‚æœä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“æ²¡æœ‰è¿™ç§å…¼å®¹ä»£ç ï¼Œåˆ™æ•´ä¸ªä¸‰æ–¹åº“æ— æ³•é€‰ç”¨ï¼ˆé™¤éä½ è‡ªå·±å¼€åˆ†æ”¯ç»´æŠ¤ï¼‰ã€‚</li></ol><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><p>å¾ˆç®€å•ï¼Œç›´æ¥ä½¿ç”¨ python è·‘ py æ–‡ä»¶å³å¯ï¼Œæ ¹æœ¬æ— éœ€æŠŠ python é¡¹ç›®é€šè¿‡ pyinstaller æ‰“åŒ…æˆå¯æ‰§è¡Œæ–‡ä»¶å†è·‘ç¨‹åºã€‚ ç¯å¢ƒéœ€è¦å®‰è£… python ç¯å¢ƒï¼Ÿ ç›´æ¥ç¼–è¯‘ä¸€ä¸ªé™æ€çš„ python å¯æ‰§è¡Œæ–‡ä»¶ï¼ŒåŠ ä¸Š venv æ‰“åŒ…ä¾èµ–åˆ° site-packages ç¯å¢ƒå°±èƒ½ç¡®ä¿ä»£ç è·¨ç³»ç»Ÿè¿è¡Œã€‚ å†äº¤å‰ç¼–è¯‘å…¶ä»–æ¶æ„çš„ python å¯æ‰§è¡Œæ–‡ä»¶å³å¯è·¨æ¶æ„è¿è¡Œã€‚ğŸ‰</p>',7),v=n("h3",{id:"ç®€å•ä½¿ç”¨",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ç®€å•ä½¿ç”¨","aria-hidden":"true"},"#"),s(" ç®€å•ä½¿ç”¨")],-1),m=n("p",null,"å‚è€ƒï¼š",-1),b={href:"https://www.askpython.com/python/examples/compiling-applications-static-binary",target:"_blank",rel:"noopener noreferrer"},h=e(`<p>ç¼–è¯‘ py æ–‡ä»¶ç”Ÿæˆ exe æ–‡ä»¶</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># å®‰è£…å·¥å…·</span>
pip <span class="token function">install</span> PyInstaller
<span class="token comment"># ç”Ÿæˆ exe æ–‡ä»¶</span>
pyinstaller <span class="token parameter variable">-F</span> stusystem.py <span class="token comment"># stusystem.exe</span>

<span class="token comment"># pyInstaller -F -w -p /dir1/;/dir2/ -i /dir3/icon.ico ***.py</span>
<span class="token comment"># -F/--onefile</span>
<span class="token comment"># -F è¡¨ç¤ºç”Ÿæˆå•ä¸€çš„exeæ–‡ä»¶</span>
<span class="token comment">#    ğŸ’¡è™½ç„¶ç”Ÿæˆäº†å•ä¸€æ–‡ä»¶ï¼Œä½†å®é™…ä¸Šè¿˜æ˜¯å‹ç¼©åŒ…å½¢å¼å­˜å‚¨å…¨éƒ¨æ–‡ä»¶ï¼Œé€šè¿‡ç‰¹æ®Šæ–¹æ³•å¯ä»¥è§£å‹ | todo è§£å‹ç”Ÿæˆçš„å•ä¸€æ–‡ä»¶</span>
<span class="token comment">#    âš ï¸å•æ–‡ä»¶æ¨¡å¼ä¸‹ï¼Œå¯åŠ¨ç¨‹åºæ—¶ä¼šå…ˆå°†å¯æ‰§è¡Œæ–‡ä»¶è¿›è¡Œè§£å‹ç¼©åˆ° /temp ç›®å½• ä¸‹ï¼Œå†æ‰§è¡Œã€‚</span>
<span class="token comment">#       æ‰€ä»¥è¢«æ‰“åŒ…è¿›å»çš„æ•°æ®æ–‡ä»¶åœ¨è¢«è§£å‹çš„è·¯å¾„ä¸‹ï¼Œæ‰€ä»¥å¦‚æœæ˜¯åœ¨è¿è¡Œçš„è·¯å¾„ä¸‹ï¼ˆå³å¯åŠ¨ç¨‹åºçš„ç›®å½•ä¸‹ï¼‰æœç´¢æ–‡ä»¶æ˜¯æ‰¾ä¸åˆ°æ•°æ®æ–‡ä»¶çš„ï¼</span>
<span class="token comment"># -w è¡¨ç¤ºç”Ÿæˆçš„exeæ–‡ä»¶æ‰§è¡Œæ—¶å»æ‰èƒŒåçš„dosçª—å£</span>
<span class="token comment"># -p pyinstaller æ‰‹åŠ¨æä¾›åŒ…çš„ä½ç½®ï¼ˆdir1ï¼Œdir2ï¼‰ï¼Œä»¥åˆ†å·éš”å¼€&quot;;&quot;</span>
<span class="token comment"># -i åŠ å…¥å›¾æ ‡</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>pyinstaller present_fasttext_txt.spec
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="ä¾‹å­-ç®€å•flaskæœåŠ¡" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-ç®€å•flaskæœåŠ¡" aria-hidden="true">#</a> ä¾‹å­ï¼š ç®€å•flaskæœåŠ¡</h4><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token triple-quoted-string string">&#39;&#39;&#39;
åˆå§‹åŒ–ï¼šæ‰€æœ‰çš„Flaskéƒ½å¿…é¡»åˆ›å»ºç¨‹åºå®ä¾‹ï¼Œ
webæœåŠ¡å™¨ä½¿ç”¨wsgiåè®®ï¼ŒæŠŠå®¢æˆ·ç«¯æ‰€æœ‰çš„è¯·æ±‚éƒ½è½¬å‘ç»™è¿™ä¸ªç¨‹åºå®ä¾‹
ç¨‹åºå®ä¾‹æ˜¯Flaskçš„å¯¹è±¡ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ç”¨å¦‚ä¸‹æ–¹æ³•å®ä¾‹åŒ–
Flaskç±»åªæœ‰ä¸€ä¸ªå¿…é¡»æŒ‡å®šçš„å‚æ•°ï¼Œå³ç¨‹åºä¸»æ¨¡å—æˆ–è€…åŒ…çš„åå­—ï¼Œ__name__æ˜¯ç³»ç»Ÿå˜é‡ï¼Œè¯¥å˜é‡æŒ‡çš„æ˜¯æœ¬pyæ–‡ä»¶çš„æ–‡ä»¶å
&#39;&#39;&#39;</span>
<span class="token keyword">from</span> flask <span class="token keyword">import</span> Flask
<span class="token keyword">import</span> datetime

server<span class="token operator">=</span>Flask<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@server<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">&#39;/time&#39;</span><span class="token punctuation">,</span>methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&#39;post&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">get_time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    now<span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">(</span>datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#æŠŠå½“å‰æ—¶é—´è½¬æ¢æˆå­—ç¬¦ä¸²</span>
    <span class="token keyword">return</span> <span class="token string">&quot;å½“å‰çš„æ—¶é—´æ˜¯ï¼š%s&quot;</span><span class="token operator">%</span>now

server<span class="token punctuation">.</span>run<span class="token punctuation">(</span>port<span class="token operator">=</span><span class="token number">8888</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># ç›´æ¥è¿è¡Œ</span>
pip3 <span class="token function">install</span> flask
python3 app.py <span class="token operator">&amp;</span>
<span class="token function">curl</span> <span class="token number">127.0</span>.0.1:8888
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># ç¼–è¯‘è¿è¡Œ</span>
pyinstaller app.py
./dist/app/app 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="é—®é¢˜-èµ„æºæ–‡ä»¶çš„è·¯å¾„" tabindex="-1"><a class="header-anchor" href="#é—®é¢˜-èµ„æºæ–‡ä»¶çš„è·¯å¾„" aria-hidden="true">#</a> é—®é¢˜ï¼š èµ„æºæ–‡ä»¶çš„è·¯å¾„</h4><p>åœ¨ py ä¸­ï¼Œèµ„æºæ–‡ä»¶æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œæ‰€ä»¥è°ƒç”¨çš„æ—¶å€™ç›´æ¥ç”¨çš„æ–‡ä»¶åã€‚</p><p>ä½†æ‰“åŒ…æˆ exe æ–‡ä»¶çš„åï¼Œèµ„æºæ–‡ä»¶ä¼šåœ¨ dist æ–‡ä»¶å¤¹ä¸‹æœç´¢æ–‡ä»¶ï¼Œä»è€Œå¯¼è‡´èµ„æºæ–‡ä»¶æ‰¾ä¸åˆ°çš„é—®é¢˜ã€‚</p><p>ä»£ç ç‰‡æ®µ1ï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> os<span class="token punctuation">,</span> sys
 
<span class="token keyword">def</span> <span class="token function">resource_path</span><span class="token punctuation">(</span>relative_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    å®šä¹‰ä¸€ä¸ªè¯»å–ç›¸å¯¹è·¯å¾„çš„å‡½æ•°
      &quot;&quot;&quot;</span>
    <span class="token keyword">if</span> <span class="token builtin">hasattr</span><span class="token punctuation">(</span>sys<span class="token punctuation">,</span> <span class="token string">&quot;_MEIPASS&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        base_path <span class="token operator">=</span> sys<span class="token punctuation">.</span>_MEIPASS
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        base_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>abspath<span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>base_path<span class="token punctuation">,</span> relative_path<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è°ƒç”¨</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># å‰</span>
classifier1 <span class="token operator">=</span> fasttext<span class="token punctuation">.</span>load_model<span class="token punctuation">(</span><span class="token string">&quot;comment_fasttext_isinv.model.bin&quot;</span>ï¼Œ label_prefix<span class="token operator">=</span><span class="token string">&#39;__label__&#39;</span><span class="token punctuation">)</span>
<span class="token comment"># å</span>
classifier1 <span class="token operator">=</span> fasttext<span class="token punctuation">.</span>load_model<span class="token punctuation">(</span>resource_path<span class="token punctuation">(</span><span class="token string">&quot;comment_fasttext_isinv.model.bin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> label_prefix<span class="token operator">=</span><span class="token string">&#39;__label__&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»£ç ç‰‡æ®µ2ï¼šä¸èƒ½åœ¨ä»£ç ä¸­ç›´æ¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„è°ƒç”¨æ–‡ä»¶</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># å…ˆè·å–å½“å‰è¿è¡Œæ—¶ä¸´æ—¶ç›®å½•è·¯å¾„</span>
<span class="token keyword">if</span> <span class="token builtin">getattr</span><span class="token punctuation">(</span>sys<span class="token punctuation">,</span> <span class="token string">&#39;frozen&#39;</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    basedir <span class="token operator">=</span> sys<span class="token punctuation">.</span>_MEIPASS
<span class="token keyword">else</span><span class="token punctuation">:</span>
    basedir <span class="token operator">=</span> path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>__file__<span class="token punctuation">)</span>
<span class="token comment"># ä½¿ç”¨ os.path.join() æ–¹æ³•ï¼Œå°† ä¸´æ—¶ç›®å½•è·¯å¾„ä¸æ–‡ä»¶ç›¸å¯¹è·¯å¾„æ‹¼æ¥</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>basedir<span class="token punctuation">,</span> <span class="token string">&#39;file.txt&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;r&#39;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fp<span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="spac-æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#spac-æ–‡ä»¶" aria-hidden="true">#</a> spac æ–‡ä»¶</h3><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># -*- mode: python -*-</span>
 
block_cipher <span class="token operator">=</span> <span class="token boolean">None</span>
 
 
a <span class="token operator">=</span> Analysis<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;present_fasttext_txt.py&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
             pathex<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&#39;/home/km/PycharmProjects/fasttext&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
             binaries<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
             <span class="token comment"># ç±»å‹ï¼štupleï¼Œå…ƒç´ æ˜¯ä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚ç¬¬ä¸€ä¸ªä¸ºæ–‡ä»¶æºè·¯å¾„ï¼›ç¬¬äºŒä¸ªä¸ºæ–‡ä»¶ç”Ÿæˆè·¯å¾„ï¼ˆç›¸å¯¹äºç”Ÿæˆçš„ç¨‹åºçš„è·¯å¾„ï¼‰</span>
             datas<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">&#39;comment_fasttext_isinv.model.bin&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;.&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&#39;comment_fasttext_isneg.model.bin&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;.&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&#39;comment_fasttext_issug.model.bin&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;.&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&#39;comment_fasttext_isbug.model.bin&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;.&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&#39;comment_fasttext_ispraise.model.bin&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;.&#39;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
             hiddenimports<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&#39;fasttext.model&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
             hookspath<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
             runtime_hooks<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
             excludes<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
             win_no_prefer_redirects<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>
             win_private_assemblies<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>
             cipher<span class="token operator">=</span>block_cipher<span class="token punctuation">)</span>
pyz <span class="token operator">=</span> PYZ<span class="token punctuation">(</span>a<span class="token punctuation">.</span>pure<span class="token punctuation">,</span> a<span class="token punctuation">.</span>zipped_data<span class="token punctuation">,</span>
             cipher<span class="token operator">=</span>block_cipher<span class="token punctuation">)</span>
exe <span class="token operator">=</span> EXE<span class="token punctuation">(</span>pyz<span class="token punctuation">,</span>
          a<span class="token punctuation">.</span>scripts<span class="token punctuation">,</span>
          a<span class="token punctuation">.</span>binaries<span class="token punctuation">,</span>
          a<span class="token punctuation">.</span>zipfiles<span class="token punctuation">,</span>
          a<span class="token punctuation">.</span>datas<span class="token punctuation">,</span>
          name<span class="token operator">=</span><span class="token string">&#39;present_fasttext_txt&#39;</span><span class="token punctuation">,</span>
          debug<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>
          strip<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>
          upx<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
          runtime_tmpdir<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>
          console<span class="token operator">=</span><span class="token boolean">True</span> <span class="token punctuation">)</span>

<span class="token comment"># collæ˜¯ç”¨æ¥åœ¨distç›®å½•ä¸‹ç”Ÿæˆç¨‹åºæ–‡ä»¶å¤¹çš„</span>
<span class="token comment"># ğŸ’¡å¦‚æœåŠ äº† -Få‚æ•°ï¼Œç”Ÿæˆçš„spacæ–‡ä»¶ä¸­æ²¡æœ‰collå†…å®¹</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="pyinstalleråˆ†æ­¥ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#pyinstalleråˆ†æ­¥ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶" aria-hidden="true">#</a> pyinstalleråˆ†æ­¥ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶</h4><p>åœ¨ä¸€äº›å…¶ä»–æƒ…å†µä¸‹ï¼Œé€šè¿‡ä¿®æ”¹specæ–‡ä»¶ï¼Œè‡ªå®šä¹‰å¯æ‰§è¡Œæ–‡ä»¶çš„ç”Ÿæˆè¿‡ç¨‹</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>pyi-makespec options name.py
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,21),g={href:"https://pythonhosted.org/PyInstaller/man/pyi-makespec.html?highlight=pyi",target:"_blank",rel:"noopener noreferrer"},y=e(`<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>pyi-makespec present_fasttext_txt.py <span class="token parameter variable">-F</span> --hidden-import fasttext.model
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="é—®é¢˜-æ‰“åŒ…æŠ¥-enable-shared-é”™è¯¯" tabindex="-1"><a class="header-anchor" href="#é—®é¢˜-æ‰“åŒ…æŠ¥-enable-shared-é”™è¯¯" aria-hidden="true">#</a> é—®é¢˜ï¼š æ‰“åŒ…æŠ¥ enable-shared é”™è¯¯</h3><p>å‚è€ƒï¼š https://blog.csdn.net/zhouguoqionghai/article/details/103102724</p><p>ç¼–è¯‘å®‰è£… python</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">wget</span> https://www.python.org/ftp/python/3.4.0/Python-3.4.0.tgz
<span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> Python-3.4.0.tgz
<span class="token builtin class-name">cd</span> Python-3.4.0
./configure
<span class="token function">make</span>
<span class="token function">make</span> <span class="token function">install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨ pyinstaller å°†æ‰€æœ‰ä¾èµ–æ‰“åŒ…åˆ°ä¸€ä¸ªæ–‡ä»¶å½“ä¸­</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>pyinstaller <span class="token parameter variable">--console</span> <span class="token parameter variable">--onefile</span> script.py
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç»“æœæŠ¥é”™</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>* On Debian/Ubuntu, you would need to <span class="token function">install</span> Python development packages
  * <span class="token function">apt-get</span> <span class="token function">install</span> python3-dev
  * <span class="token function">apt-get</span> <span class="token function">install</span> python-dev
* If you&#39;re building Python by yourself, please rebuild your Python with <span class="token variable"><span class="token variable">\`</span>--enable-shared<span class="token variable">\`</span></span> <span class="token punctuation">(</span>or, <span class="token variable"><span class="token variable">\`</span>--enable-framework<span class="token variable">\`</span></span> on Darwin<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‡æ–°ç¼–è¯‘å®‰è£… python</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>./configure --enable-shared
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æŠ¥é”™ï¼š <code>error while loading shared librariesï¼šÂ </code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># æœåŠ¨æ€åº“ä½ç½®</span>
$ <span class="token function">find</span> /usr <span class="token parameter variable">-name</span> <span class="token string">&#39;libpython3.6m.so.1.0&#39;</span>
/usr/local/lib

<span class="token comment"># ldconfig å‘½ä»¤ç”¨æ¥ç®¡ç†é“¾æ¥å™¨çš„åŠ¨æ€åº“æœç´¢è·¯å¾„ï¼Œé»˜è®¤çš„æ˜¯ /lib å’Œ /usr/lib å·²ç» /etc/ld.so.conf é…ç½®æ–‡ä»¶ä¸­åŒ…å«çš„ç›®å½•</span>
<span class="token comment"># è¯¥è·¯å¾„ä¸åœ¨è¿é“¾æ¥å™¨é»˜è®¤çš„åŠ¨æ€åº“æœç´¢èŒƒå›´é‡Œï¼Œå¯ä»¥ ldconfig -v | grep python çœ‹ä¸åˆ°è¯¥åŠ¨æ€åº“ã€‚</span>
<span class="token comment"># è‹¥è¯¥åº“ä¸åœ¨é“¾æ¥å™¨çš„æœç´¢èŒƒå›´å†…ï¼Œæ‰§è¡Œ ldd $(which python3) å¯æŸ¥çœ‹åˆ°è¯¥åº“æŒ‡å‘ä¸º not found.</span>
$ ldd <span class="token variable"><span class="token variable">$(</span><span class="token function">which</span> python3<span class="token variable">)</span></span> 
        linux-vdso.so.1 <span class="token operator">=</span><span class="token operator">&gt;</span>  <span class="token punctuation">(</span>0x00007ffd609e2000<span class="token punctuation">)</span>
        libpython3.4m.so.1.0 <span class="token operator">=</span><span class="token operator">&gt;</span> not found
        libpthread.so.0 <span class="token operator">=</span><span class="token operator">&gt;</span> /lib64/libpthread.so.0 <span class="token punctuation">(</span>0x00007f6e934cf000<span class="token punctuation">)</span>
        libdl.so.2 <span class="token operator">=</span><span class="token operator">&gt;</span> /lib64/libdl.so.2 <span class="token punctuation">(</span>0x00007f6e932ca000<span class="token punctuation">)</span>
        libutil.so.1 <span class="token operator">=</span><span class="token operator">&gt;</span> /lib64/libutil.so.1 <span class="token punctuation">(</span>0x00007f6e930c7000<span class="token punctuation">)</span>
        libm.so.6 <span class="token operator">=</span><span class="token operator">&gt;</span> /lib64/libm.so.6 <span class="token punctuation">(</span>0x00007f6e92e43000<span class="token punctuation">)</span>
        libc.so.6 <span class="token operator">=</span><span class="token operator">&gt;</span> /lib64/libc.so.6 <span class="token punctuation">(</span>0x00007f6e92aae000<span class="token punctuation">)</span>
        /lib64/ld-linux-x86-64.so.2 <span class="token punctuation">(</span>0x00007f6e93ba2000<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è§£å†³</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># æ–¹å¼ä¸€ï¼š âš ï¸éœ€è¦ç®¡ç†å‘˜æƒé™</span>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;/usr/local/lib&#39;</span> <span class="token operator">&gt;&gt;</span> /etc/ld.so.conf <span class="token comment"># å°†è·¯å¾„å†™å…¥åŠ¨æ€é“¾æ¥åº“é…ç½®</span>
ldconfig <span class="token comment"># åˆ·æ–°ä¸€ä¸‹ç¼“å­˜</span>

<span class="token comment"># æ–¹å¼äºŒï¼šä¸´æ—¶çš„æ›¿ä»£æ–¹æ³•å°±æ˜¯ä¿®æ”¹é¢„å®šä¹‰å˜é‡</span>
<span class="token assign-left variable">LD_LIBRARY_PATH</span><span class="token operator">=</span>/opt/python/lib
<span class="token builtin class-name">export</span> LD_LIBRARY_PATH <span class="token comment"># å¾—å­è¿›ç¨‹å½“ä¸­èƒ½å¤Ÿä½¿ç”¨</span>

<span class="token comment"># æ–¹å¼ä¸‰ï¼š åœ¨ç¼–è¯‘é…ç½®æ—¶å°±æŒ‡å®šåŠ¨æ€é“¾æ¥åº“ä½ç½®</span>
./configure --enable-shared <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/opt/python <span class="token assign-left variable">LDFLAGS</span><span class="token operator">=</span>-Wl,-rpath<span class="token operator">=</span>/opt/python/lib
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é—®é¢˜-è¿è¡Œæ—¶-no-module-named-matplotlib-backends-backend-tkagg" tabindex="-1"><a class="header-anchor" href="#é—®é¢˜-è¿è¡Œæ—¶-no-module-named-matplotlib-backends-backend-tkagg" aria-hidden="true">#</a> é—®é¢˜ï¼š è¿è¡Œæ—¶ No module named &#39;matplotlib.backends.backend_tkagg&#39;</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>E:<span class="token punctuation">\\</span>0E207<span class="token punctuation">\\</span>soft<span class="token punctuation">\\</span>dist<span class="token operator">&gt;</span>.<span class="token punctuation">\\</span>dist<span class="token punctuation">\\</span>cellsim
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span>:
  File <span class="token string">&quot;CellSim.pyw&quot;</span>, line <span class="token number">6</span>, <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
  File <span class="token string">&quot;F:\\python35-32\\lib\\site-packages\\pyinstaller-3.2.1-py3.5.egg\\PyInstaller\\loader\\pyimod03_importers.py&quot;</span>, line <span class="token number">389</span>, <span class="token keyword">in</span> load_module
    exec<span class="token punctuation">(</span>bytecode, module.__dict__<span class="token punctuation">)</span>
  File <span class="token string">&quot;Lib\\site-packages\\matplotlib\\pyplot.py&quot;</span>, line <span class="token number">114</span>, <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
  File <span class="token string">&quot;Lib\\site-packages\\matplotlib<span class="token entity" title="\\b">\\b</span>ackends\\__init__.py&quot;</span>, line <span class="token number">32</span>, <span class="token keyword">in</span> pylab_setup
ImportError: No module named <span class="token string">&#39;matplotlib.backends.backend_tkagg&#39;</span>
Failed to execute script CellSim
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸¤ç§åŸå› ï¼š ä¸€ä¸ªæ˜¯ä¾èµ–åŒ…æ²¡è£…ï¼Œä¸€ä¸ªæ˜¯ä¾èµ–æ²¡è¢«pyinstallerè¯†åˆ«</p><ul><li><p>å¯¹äºï¼š ä¾èµ–åŒ…æ²¡è£…</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ä¸‹è½½ä¾èµ–ï¼Œé‡æ–°ç¼–è¯‘
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>å¯¹äºï¼š ä¾èµ–æ²¡è¢«pyinstallerè¯†åˆ«</p><p>åŠ å‚æ•° <code>--hidden-import matplotlib.backends.backend_tkagg</code></p></li></ul><h3 id="é—®é¢˜-glibc-issue-é™æ€ç¼–è¯‘" tabindex="-1"><a class="header-anchor" href="#é—®é¢˜-glibc-issue-é™æ€ç¼–è¯‘" aria-hidden="true">#</a> é—®é¢˜ï¼š GLIBC issue / é™æ€ç¼–è¯‘</h3><p>::: waning PyInstaller + StaticX å®æµ‹æœ‰é—®é¢˜ã€‚ todo ç†è§£ã€è§£å†³æ–¹æ¡ˆ :::</p><p>å‚è€ƒï¼š</p><ul><li>GLIBC issue | https://github.com/orgs/pyinstaller/discussions/5669</li><li>Python ç¼–è¯‘ã€Œé™æ€ã€å¯æ‰§è¡Œæ–‡ä»¶ (PyInstaller + StaticX) | https://hydrotho.github.io/Compiling-Python-Application-Into-Static-Binary-Using-PyInstaller-And-StaticX/</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># æ‰“åŒ…é¡¹ç›®ä¸ºå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆELFï¼‰ï¼Œå­˜æ”¾æ”¾åœ¨distä¸­ </span>
pyinstaller main.py <span class="token comment"># å¤šæ–‡ä»¶</span>
<span class="token comment"># or</span>
pyinstaller main.py <span class="token parameter variable">--onefile</span> <span class="token comment"># å•æ–‡ä»¶</span>
pyinstaller <span class="token parameter variable">-F</span> main.py
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡ä¸Šé¢å‘½ä»¤ï¼Œå¯ä»¥å°†é¡¹ç›®æ‰“åŒ…ä¸ºå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆELFï¼‰ã€‚</p><p>ä½†å¯æ‰§è¡Œæ–‡ä»¶ä»ç„¶å¯èƒ½åœ¨å…¶ä»–æœºå™¨ï¼ˆç”šè‡³åŒæ¶æ„ã€åŒç³»ç»Ÿçš„æœºå™¨ï¼‰ä¸Šè¿è¡ŒæŠ¥é”™ã€‚å› ä¸ºï¼Œå…¶ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶æ˜¯åŠ¨æ€é“¾æ¥çš„ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ ldd dist/app/app 
        linux-vdso.so.1 <span class="token punctuation">(</span>0x00007ffd52bf8000<span class="token punctuation">)</span>
        libdl.so.2 <span class="token operator">=</span><span class="token operator">&gt;</span> /lib/x86_64-linux-gnu/libdl.so.2 <span class="token punctuation">(</span>0x00007f520b7dc000<span class="token punctuation">)</span>
        libz.so.1 <span class="token operator">=</span><span class="token operator">&gt;</span> /lib/x86_64-linux-gnu/libz.so.1 <span class="token punctuation">(</span>0x00007f520b7c0000<span class="token punctuation">)</span>
        libpthread.so.0 <span class="token operator">=</span><span class="token operator">&gt;</span> /lib/x86_64-linux-gnu/libpthread.so.0 <span class="token punctuation">(</span>0x00007f520b7bb000<span class="token punctuation">)</span>
        libc.so.6 <span class="token operator">=</span><span class="token operator">&gt;</span> /lib/x86_64-linux-gnu/libc.so.6 <span class="token punctuation">(</span>0x00007f520b592000<span class="token punctuation">)</span>
        /lib64/ld-linux-x86-64.so.2 <span class="token punctuation">(</span>0x00007f520b7e9000<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å› ä¸ºè¿™ç§å¯æ‰§è¡Œæ–‡ä»¶ä¸æ˜¯å®Œå…¨é™æ€çš„ï¼Œæ‰€ä»¥å®ƒä¾èµ–äºç³»ç»Ÿçš„ libcã€‚ åœ¨ Linux ä¸‹ï¼ŒGLIBC çš„ ABI æ˜¯å‘åå…¼å®¹çš„ï¼Œä½†ä¸æ˜¯å‘å‰å…¼å®¹çš„ã€‚ å› æ­¤ï¼Œå¦‚æœä½ ç”¨è¾ƒæ–°çš„ GLIBC é“¾æ¥ï¼Œä½ å°±ä¸èƒ½åœ¨è¾ƒæ—§çš„ç³»ç»Ÿä¸Šè¿è¡Œç¼–è¯‘å¥½çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</p><p>ä¸€ç§è§£å†³æ–¹æ³•æ˜¯åœ¨æœ€è€çš„ç³»ç»Ÿä¸Šç¼–è¯‘ Python è§£é‡Šå™¨åŠå…¶æ¨¡å—ï¼Œä»è€Œä½¿ç”¨æ—§çš„ GLIBC ç‰ˆæœ¬ï¼Œä½†è¿™å¿…ç„¶å¼•å…¥å®‰å…¨é—®é¢˜ã€‚</p><p>å½»åº•è§£å†³çš„æ–¹æ³•æ˜¯å°† Python åº”ç”¨ç¨‹åºç¼–è¯‘æˆã€Œé™æ€ã€å¯æ‰§è¡Œæ–‡ä»¶ã€‚ è¿™é‡Œï¼Œä½¿ç”¨ StaticX å·¥å…·ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>pip <span class="token function">install</span> <span class="token parameter variable">-U</span> staticx
staticx <span class="token operator">&lt;</span>åŠ¨æ€å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>é™æ€å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ staticx dist/app/app dist/app/app-staticx
$ <span class="token function">file</span> dist/app/app
dist/app/app: ELF <span class="token number">64</span>-bit LSB executable, x86-64, version <span class="token number">1</span> <span class="token punctuation">(</span>SYSV<span class="token punctuation">)</span>, dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, BuildID<span class="token punctuation">[</span>sha1<span class="token punctuation">]</span><span class="token operator">=</span>4900f1057c817d78f6abf8c33793107b79dcd1a7, <span class="token keyword">for</span> GNU/Linux <span class="token number">2.6</span>.32, stripped
$ ldd dist/app/app
        linux-vdso.so.1 <span class="token punctuation">(</span>0x00007ffec835e000<span class="token punctuation">)</span>
        libdl.so.2 <span class="token operator">=</span><span class="token operator">&gt;</span> /lib/x86_64-linux-gnu/libdl.so.2 <span class="token punctuation">(</span>0x00007f19f2be6000<span class="token punctuation">)</span>
        libz.so.1 <span class="token operator">=</span><span class="token operator">&gt;</span> /lib/x86_64-linux-gnu/libz.so.1 <span class="token punctuation">(</span>0x00007f19f2bca000<span class="token punctuation">)</span>
        libpthread.so.0 <span class="token operator">=</span><span class="token operator">&gt;</span> /lib/x86_64-linux-gnu/libpthread.so.0 <span class="token punctuation">(</span>0x00007f19f2bc5000<span class="token punctuation">)</span>
        libc.so.6 <span class="token operator">=</span><span class="token operator">&gt;</span> /lib/x86_64-linux-gnu/libc.so.6 <span class="token punctuation">(</span>0x00007f19f299c000<span class="token punctuation">)</span>
        /lib64/ld-linux-x86-64.so.2 <span class="token punctuation">(</span>0x00007f19f2bf3000<span class="token punctuation">)</span>
$ <span class="token function">file</span> dist/app/app-staticx 
dist/app/app-staticx: ELF <span class="token number">64</span>-bit LSB executable, x86-64, version <span class="token number">1</span> <span class="token punctuation">(</span>SYSV<span class="token punctuation">)</span>, statically linked, with debug_info, not stripped
$ ldd dist/app/app-staticx
        not a dynamic executable
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">æ³¨æ„</p><p>é™¤äº†å®‰è£… StaticX åŒ…ï¼Œè¿˜éœ€è¦ç¡®ä¿å·²å®‰è£…å¦‚ä¸‹å‘½ä»¤ï¼š</p><ul><li><code>ldd</code></li><li><code>readelf</code></li><li><code>objcopy</code></li><li><code>patchelf</code></li></ul><p>é€šè¿‡ <code>command -v &lt;COMMAND&gt;</code> æ¥æ£€æŸ¥å‘½ä»¤æ˜¯å¦å­˜åœ¨ã€‚</p></div><div class="custom-container danger"><p class="custom-container-title">è­¦å‘Š</p><p><strong>å­˜åœ¨çš„é—®é¢˜</strong></p><p>StaticX ç”Ÿæˆçš„ã€Œé™æ€ã€å¯æ‰§è¡Œæ–‡ä»¶åœ¨è¿è¡Œæ—¶å°†åœ¨ç³»ç»Ÿçš„ <code>/tmp/</code> è·¯å¾„ä¸‹åˆ›å»ºéšæœºä¸´æ—¶æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­å­˜æ”¾æœ‰åº”ç”¨ç¨‹åºè¿è¡Œæ‰€éœ€çš„åº“ï¼Œå¹¶ä¸”è¯¥ç›®å½•å°†åœ¨åº”ç”¨ç¨‹åºé€€å‡ºæ—¶è¢«è‡ªåŠ¨æ¸…é™¤ã€‚</p><p>åº”ç”¨ç¨‹åºåœ¨è¿è¡Œæ—¶ä»¥è¯¥ä¸´æ—¶æ–‡ä»¶å¤¹ä¸ºå…¶å·¥ä½œç›®å½•ï¼Œè¿™æ„å‘³ç€è¯¸å¦‚ <code>__file__</code> å˜é‡å’Œ <code>os</code>, <code>pathlib</code> ç­‰åº“æ‰€è·å–åˆ°çš„è·¯å¾„å°†å‡ºç°å¼‚å¸¸ã€‚</p><p>å› æ­¤ï¼š</p><ol><li>é€šè¿‡ <code>pyinstaller app.py</code> ç”Ÿæˆçš„å¤šæ–‡ä»¶å½¢å¼ä¸èƒ½ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ ./dist/app/app-staticx 
<span class="token punctuation">[</span><span class="token number">1141</span><span class="token punctuation">]</span> Error loading Python lib <span class="token string">&#39;/tmp/staticx-EbFLcK/_internal/libpython3.10.so.1.0&#39;</span><span class="token builtin class-name">:</span> dlopen: /tmp/staticx-EbFLcK/_internal/libpython3.10.so.1.0: cannot <span class="token function">open</span> shared object file: No such <span class="token function">file</span> or directory
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>é€šè¿‡ <code>pyinstaller -F app.py</code> ç”Ÿæˆçš„å•æ–‡ä»¶å½¢å¼ä¹Ÿå¯èƒ½å‡ºç°é—®é¢˜ï¼š</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ staticx dist/app dist/app-staticx
staticx: /tmp/staticx-pyi-ct_w5qq1/base_library.zip: Invalid ELF image: Magic number does not match
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div>`,34);function x(f,_){const i=p("RouterLink"),t=p("ExternalLinkIcon");return o(),c("div",null,[n("div",r,[k,n("p",null,[s("python é™æ€ç¼–è¯‘å‚è€ƒï¼š "),a(i,{to:"/dev/python/python-build.html"},{default:d(()=>[s("link")]),_:1})])]),v,m,n("ul",null,[n("li",null,[n("s",null,[n("a",b,[s("https://www.askpython.com/python/examples/compiling-applications-static-binary"),a(t)])]),s(" å¤ªå†—é•¿")])]),h,n("p",null,[s("å‚æ•°ï¼š "),n("a",g,[s("https://pythonhosted.org/PyInstaller/man/pyi-makespec.html?highlight=pyi"),a(t)])]),y])}const q=l(u,[["render",x],["__file","pyinstaller.html.vue"]]);export{q as default};
